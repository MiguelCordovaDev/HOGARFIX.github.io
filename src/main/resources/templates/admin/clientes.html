<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head('Clientes registrados')}"></head>
<body>
  <header th:replace="~{fragments/navbar :: navbar}"></header>

  <style>
    .admin-page { display: flex; flex-direction: column; min-height: 100vh; }
    .admin-content { flex: 1 0 auto; }
    footer[th\:fragment] { margin-top: 0 !important; }
  </style>

  <div class="admin-page">
    <main class="admin-content">
      <div class="container my-5">
    <h2 class="mb-4">Listado de clientes (solo lectura)</h2>

    <div th:if="${not #lists.isEmpty(clientes)}">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nombre completo</th>
              <th>Email</th>
              <th>Tel√©fono</th>
              <th>DNI</th>
              <th>Ciudad</th>
              <th>Fecha registro</th>
            </tr>
          </thead>
          <tbody>
              <tr th:each="cliente : ${clientes}">
              <td th:text="${cliente.idCliente}">-</td>
              <td>
                <span th:text="${cliente.nombres ?: 'N/A'}"></span>
                <span th:if="${cliente.apellidoPaterno}" th:text="${' ' + cliente.apellidoPaterno}"></span>
                <span th:if="${cliente.apellidoMaterno}" th:text="${' ' + cliente.apellidoMaterno}"></span>
              </td>
              <td th:text="${cliente.usuario?.email ?: 'N/A'}">-</td>
              <td th:text="${cliente.telefono ?: 'N/A'}">-</td>
              <td th:text="${cliente.dni ?: 'N/A'}">-</td>
              <td th:text="${cliente.direccion?.ciudad?.nombre ?: 'N/A'}">-</td>
              <td th:text="${cliente.createdAt}">-</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div th:if="${#lists.isEmpty(clientes)}" class="alert alert-info">No hay clientes registrados.</div>

    <a th:href="@{/admin/dashboard}" class="btn btn-secondary mt-3">Volver</a>
      </div>
    </main>
    <footer th:replace="~{fragments/footer :: footer}" class="mt-auto"></footer>
  </div>
</body>
</html>
</body>
</html>